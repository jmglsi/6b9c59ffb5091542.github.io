---
title: 内网折腾之私人影院
toc: true
date: 2023-10-10 14:38:35
categories: 内网
tags:
- NAS
---
用了 NAS 有一段时间了，体验非常好！
<!-- more -->

系统用的 [unraid](https://unraid.net/zh)，可以先试用 1 个月，再决定买不买，有优惠码 200+ 就可以拿下了。

![截屏2023-10-10_14.43.20.png](/images/截屏2023-10-10_14.43.20.png)

用了这么长时间，体验来说 [plex](https://www.plex.tv) > [jellyfin](https://jellyfin.org)，plex 刮的又快又准（

> 怎么添加本地的资源可以参考网上其他的教程。这次主要写下用 `plex` 演示接入 [阿里云盘](https://pages.aliyundrive.com/mobile-page/web/signup.html?code=2e45a9c)，给内网电视机用。

![截屏2023-10-10_15.26.17.png](/images/截屏2023-10-10_15.26.17.png)

主要用到的几个 docker：`alist`、`rclone`、`xteve`、`plex`。

# 配置 alist

> alist 默认缓存 30 分钟，如果有增删文件的操作，记得右侧手动刷新下。
> 其实到这一步已经是可以了。[kodi 支持添加 WebDAV](http://www.kodiplayer.cn/course/2961.html)，下面写的是接入 `plex` 的，因为这个刮完以后体验太好了。

使用 alist 挂载云盘，他可以让所有云盘支持 [WebDAV](https://baike.baidu.com/item/WebDAV/4610909)。

![截屏2023-10-10_15.11.16.png](/images/截屏2023-10-10_15.11.16.png)

WebDAV 就是在链接后面加个 `/dav`，比如： `http://192.168.24.171:5244/dav`，登录的账号密码和你登录后台的一致。

# rclone 挂载云盘

使用 [rclone 配置 WebDAV](https://blog.csdn.net/qq_35385687/article/details/128845882)，然后将云盘挂载到本地。

> 挂载云盘，被挂载的目录一定要存在，否则会报错。一定要加上 `Referer`，不加现在就是无权限。

```
rclone mount Alist:/aliyundrive_6ebcb /mnt/user/alist/aliyundrive_6ebcb --cache-dir /tmp --allow-other --vfs-cache-mode writes --header "Referer: https://www.aliyundrive.com/drive" &
```

> 卸载云盘。

```
fusermount -qzu /mnt/user/alist/aliyundrive_88db0
```

# plex 使用云盘

映射云盘路径。

![截屏2023-10-10_15.32.24.png](/images/截屏2023-10-10_15.32.24.png)

然后在 plex 里，就可以直接添加云盘里的资源啦。

![截屏2023-10-10_15.34.42.png](/images/截屏2023-10-10_15.34.42.png)

> 需要注意一下，云盘刚添加资源的话可能不会立即扫出来，需要等几分钟。

# 电视直播

> xteve 可能需要魔法，才能正常更新 `视频地址` 和 `节目地址`。

添加电视直播，[项目地址](https://github.com/fanmingming/live)

![截屏2023-10-10_15.55.10.png](/images/截屏2023-10-10_15.55.10.png)

> plex 似乎没法直接添加 m3u，xteve 设置里的 Stream Buffer 可以修改成 `FFmpeg`。
> jellyfin 没法更新节目的话，先把节目地址移除再重新添加。

plex 那边需要在 右上角头像-账户设置-电视直播和数字录像机 (拉到最底下) 设置一下。

> 视频地址：http://192.168.24.171:34400/m3u/xteve.m3u
> 节目地址：http://192.168.24.171:34400/xmltv/xteve.xml

![截屏2023-10-10_15.57.25.png](/images/截屏2023-10-10_15.57.25.png)

添加设备的时候应该可以自动扫到，没有扫到可以手动指定。

![截屏2023-10-10_16.07.45.png](/images/截屏2023-10-10_16.07.45.png)

# 其他

电视上安装 plex，但是我估计不一定能装上，比如我家最新版 plex 就不行，得用老版本，老版本功能太少了。

所以我只能 [kodi](https://kodi.tv) + jellyfin。

没办法，手机上的视频会员都开到 2026 年了，电视上还得再开，开了还不够，还有 `云首发`、`超前点播`，甚至连投屏都给你限制了，看个电视真不容易。